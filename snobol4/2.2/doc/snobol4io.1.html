<!-- generated by $Id: snopea.sno,v 1.33 2015-01-02 03:31:20 phil Exp $ -->
<html>
<head>
<title>SNOBOL4IO(1) | CSNOBOL4B 2.2 | December 5, 2020</title>
</head>
<body>
<h1>SNOBOL4IO(1) | CSNOBOL4B 2.2 | December 5, 2020</h1>
<h2>NAME</h2>
snobol4io &ndash; SNOBOL4 file I/O
<h2>DESCRIPTION</h2>
Macro SNOBOL4 originally depended on <B>FORTRAN</B> libraries, unit
numbers and <B>FORMAT</B>s for input and output.  CSNOBOL4 uses the C
<B>stdio</B>(3) library instead, but unit numbers (INTEGERs between 1 and
256) and record lengths remain embedded in the Macro SNOBOL4 code.
<h3>I/O Associations</h3>
Output on a closed unit generates a fatal &ldquo;Output error&rdquo;,
see <a href="snobol4error.1.html"><B>snobol4error</B>(1)</a>.
<p>
The following variable/unit/file associations exist by default;
<p>
<table>
<tr><td>Variable<td>Unit<td>Association
<tr><td><B>INPUT</B><td>5<td>standard input (input)
<tr><td><B>OUTPUT</B><td>6<td>standard output (output)
<tr><td><B>TERMINAL</B><td>7<td>standard error (output)
<tr><td><B>TERMINAL</B><td>8<td>/dev/tty (input)
</table>
<h3>Named files</h3>
Input and output filenames can be supplied to the <B>INPUT()</B> and
<B>OUTPUT()</B> functions via an optional fourth argument.
<dl>
<p>
<dt>
filename - (hyphen)
<dd>
is interpreted as stdin on <B>INPUT()</B> and stdout on <B>OUTPUT()</B>.
<p>
<dt>
sub-process I/O using PIPE and Pseudo-terminals
<dd>
If the filename begins with single a vertical bar (<B>|</B>),
the remainder is used
as a shell command whose stdin (in the case of <B>OUTPUT()</B>) or stdout
(in the case of <B>INPUT()</B>) will be connected to the file variable via
a pipe.  If a pipe is opened by INPUT() input in &ldquo;update&rdquo; mode, the
connection will be bi-directional (on systems with socketpair and
Unix-domain sockets).  See below for how to associate a variable for
I/O in both directions.
<p>
<dt>

<dd>
If the filename begins with two vertical bars (<B>||</B>) the remainder is
used as a shell command executed with stdin, stdout and stderr
attached to the slave side of a pseudo-terminal (pty), if the system C
library contains the <B>forkpty</B>(3) routine.  Use of ptys are necessary
when the program to be invoked cannot be run without a &ldquo;terminal&rdquo; for
I/O.  See below on how to properly associate the I/O variable.
<p>
<dt>
magic paths <B>/dev/stdin</B>, <B>/dev/stdout</B>, and <B>/dev/stderr</B>
<dd>
<B>/dev/stdin</B>, <B>/dev/stdout</B>, and <B>/dev/stderr</B> refer to the current
process standard input, standard output and standard error I/O streams
respectively <I>regardless</I> of whether those special filenames exist on
your system.
<p>
<dt>
magic path <B>/dev/fd/</B><I>n</I>
<dd>
<B>/dev/fd/</B><I>n</I> uses <B>fdopen</B>(3) to open a new I/O stream associated
with file descriptor number <I>n</I>, regardless of whether the special
device entries exist.
<p>
<dt>
magic paths <B>/tcp/</B><I>hostname</I>/<I>service</I>, <B>/udp/</B><I>hostname</I>/<I>service</I>
<dd>
and <B>/tls/</B><I>hostname</I>/<I>service</I>.
<B>/tcp/</B><I>hostname</I>/<I>service</I> can be used to open connection to a TCP
server. <B>/udp/</B><I>hostname</I>/<I>service</I> behaves similarly
for UDP. <B>/tls/</B><I>hostname</I>/<I>service</I> opens a TLS over TCP connection
(NOTE! does not attempt to verify certificate unless "verify" option used,
and even then does not handle SNI or SAN).
Path can followed by a number of different slash separated options:
<p>
<table>
<tr><td>broadcast<td>Allow broadcast address (UDP only).
<tr><td>dontroute<td>Enables routing bypass for outgoing messages.
<tr><td>keepalive<td>Enables TCP connection keep alive messages.
<tr><td>nodelay<td>Send TCP data without waiting.
<tr><td>oobinline<td>Enables reception of out-of-band data in band.
<tr><td>priv<td>Bind local port number under 1024 (if allowed).
<tr><td>reuseaddr<td>Allow quick reuse of local addresses.
<tr><td>verify<td>Attempt to verify server TLS certificate.
</table>
<p>
<dt>
magic pathname <B>/dev/tmpfile</B>
<dd>
<B>/dev/tmpfile</B> opens an anonymous temporary file for reading and writing, see
<B>